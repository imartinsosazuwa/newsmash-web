(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,a){e.exports=a(56)},45:function(e,t,a){},47:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(26),c=a.n(s),o=(a(39),a(13)),i=a(14),l=a(28);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=a(4),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stories:[],loading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_FETCH_MIX":return Object(u.a)({},e,{stories:[],loading:!0});case"FETCH_MIX":return Object(u.a)({},e,{stories:t.payload,loading:!1});default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{topic:"",words:[],recentMashes:[],loading:!1,saving:!1,saved:!1,error:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_FETCH_MASH":return Object(u.a)({},e,{words:[],loading:!0,saving:!1,saved:!1,error:!1});case"FETCH_MASH":return Object(u.a)({},e,{topic:t.payload.topic,words:t.payload.words,loading:!1});case"START_FETCH_SAVED_MASH":return Object(u.a)({},e,{topic:t.payload,words:[],loading:!0,saving:!1,saved:!1,error:!1});case"START_SAVE_MASH":return Object(u.a)({},e,{saving:!0,loading:!1,saved:!1,error:!1});case"COMPLETE_SAVE":return Object(u.a)({},e,{saving:!1,saved:!0});case"FETCH_RECENT_MASH_LIST":return Object(u.a)({},e,{recentMashes:t.payload});case"START_SET_RECENT_MASH":return Object(u.a)({},e,{topic:t.payload,loading:!1,saving:!1,saved:!1,error:!1});case"SET_RECENT_MASH":return Object(u.a)({},e,{words:t.payload,error:!1,saved:!0});case"SET_TOPIC":return Object(u.a)({},e,{topic:t.payload});case"SET_SAVED":return Object(u.a)({},e,{saved:!0});case"SET_ERROR":return Object(u.a)({},e,{loading:!1,saved:!1,error:!0});default:return e}},p=Object(i.c)({mix:h,mash:m}),d=(a(45),a(58)),E=a(60),v=a(59),f=(a(47),a(5)),b=a(6),S=a(8),y=a(7),M=a(9),g=a(10),O=a.n(g),T=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(S.a)(this,Object(y.a)(t).call(this))).handleChange=function(t){e.setState({text:t.target.value})},e.handleSubmit=function(e){e.preventDefault()},e.handleMashRequest=function(){e.props.history.push("/mashes/".concat(O.a.kebabCase(e.state.text))),e.setState({text:""})},e.handleMixRequest=function(){e.props.history.push("/mixes/".concat(O.a.kebabCase(e.state.text))),e.setState({text:""})},e.state={text:""},e}return Object(M.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{className:"form-inline",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",value:this.state.text,onChange:this.handleChange,className:"form-control mr-sm-2",autoFocus:!0})),r.a.createElement("input",{type:"submit",className:"btn btn-secondary mr-sm-2",value:"Mix it",onClick:this.handleMixRequest}),r.a.createElement("input",{type:"submit",className:"btn btn-secondary",value:"Mash it",onClick:this.handleMashRequest})))}}]),t}(n.Component),_="https://newsmashed-api.herokuapp.com/api/v1",j={NEW_MASH:_+"/mashes/data",MASHES:_+"/mashes",SAVED_MASHES:_+"/mashes/recent",NEW_MIX:_+"/mixes/data"},N=function(e){var t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)};return function(e){return e({type:"START_FETCH_MIX"}),fetch(j.NEW_MIX,t).then(function(e){return e.json()}).then(function(t){e({type:"FETCH_MIX",payload:t})}).catch(function(e){return console.error(e)})}},C=function(e){var t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)};return function(a){return a({type:"SET_TOPIC",payload:e}),a({type:"START_FETCH_MASH"}),fetch(j.NEW_MASH,t).then(function(e){return e.json()}).then(function(e){a({type:"FETCH_MASH",topic:e.topic,payload:e})}).catch(function(e){a({type:"SET_ERROR"})})}},A=function(){return function(e){return fetch(j.SAVED_MASHES).then(function(e){return e.json()}).then(function(t){e({type:"FETCH_RECENT_MASH_LIST",payload:t})}).catch(function(e){return console.error(e)})}},x=function(e){function t(){return Object(f.a)(this,t),Object(S.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark navbar-container"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("img",{src:"/logo-white.png",alt:"newsmash-logo"})),r.a.createElement("div",{className:"navbar-item"},r.a.createElement(T,{fetchMixSearch:this.props.fetchMixSearch,fetchMashSearch:this.props.getMashWords,history:this.props.history}))))}}]),t}(n.Component),w=Object(o.b)(null,{fetchMixSearch:N,getMashWords:C})(x),H=a(29),R=a(57),k=function(){return r.a.createElement("div",{className:"top-links-container"},r.a.createElement("div",{className:"sidebar-heading"},"Top Stories"),r.a.createElement("div",{className:"sidebar-link"},r.a.createElement(R.a,{to:"/mixes"},"Get a mix")),r.a.createElement("div",{className:"sidebar-link"},r.a.createElement(R.a,{to:"/mashes"},"Get a mash")))};function F(e){var t=e.mash,a="/mashes/saved/".concat(t.id),n=O.a.startCase(O.a.replace(t.topic,/-/g," "));return r.a.createElement("div",{className:"sidebar-link"},r.a.createElement(R.a,{to:a},n),r.a.createElement("span",null,t.likes))}var I=function(e){return r.a.createElement("div",{className:"sidebar-container"},r.a.createElement("div",{className:"sidebar-heading"},"Saved Mashes"),e.recentMashes.map(function(e){return r.a.createElement(F,{key:e.id,mash:e})}))},D=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(S.a)(this,Object(y.a)(t).call(this))).onSetSidebarOpen=function(){e.setState({sidebarOpen:!e.state.sidebarOpen})},e.state={sidebarOpen:!1},e}return Object(M.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.getRecentMashes()}},{key:"render",value:function(){return r.a.createElement(H.a,{sidebar:r.a.createElement("div",{className:"sidebar"},r.a.createElement(k,null),r.a.createElement(I,{recentMashes:this.props.recentMashes})),open:this.state.sidebarOpen,onSetOpen:this.onSetSidebarOpen,styles:{sidebar:{background:"white"}}},r.a.createElement("button",{className:"hamburger hamburger--spin",type:"button",onClick:this.onSetSidebarOpen},r.a.createElement("span",{className:"hamburger-box toggle-sidebar-btn"},r.a.createElement("span",{className:"hamburger-inner"}))))}}]),t}(n.Component),X=Object(o.b)(function(e){return{recentMashes:e.mash.recentMashes}},{getRecentMashes:A})(D),V=function(e){return r.a.createElement("div",{className:"mix-item"},r.a.createElement("div",{className:"mix-headline"},r.a.createElement("a",{href:e.url},e.headline)),r.a.createElement("span",{className:"news-source"},e.source),r.a.createElement("span",{className:"news-content"}," ",e.description))};function W(){return r.a.createElement("div",{id:"spinner",className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{id:"loader"},r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"lading"}))),r.a.createElement("span",{className:"sr-only"},"Loading..."))}var B=function(e){var t,a=e.mix,n=a.stories;return t=a.loading?r.a.createElement(W,null):n.length?n.map(function(e){return r.a.createElement(V,{key:e.url,headline:e.title,source:e.name,description:e.description,url:e.url})}):r.a.createElement("div",{className:"loading-message"},"Hmm, no stories found. Try searching again."),r.a.createElement("div",null,t)},P=function(e){function t(){return Object(f.a)(this,t),Object(S.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(e){this.renderMix()}},{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&this.renderMix()}},{key:"renderMix",value:function(){var e=this.props.match.params.topic,t=this.props,a=t.fetchMixSearch,n=t.fetchMix;e?a(e):n()}},{key:"render",value:function(){var e=this.props.match.params.topic,t=e?"".concat(O.a.startCase(O.a.replace(e,/-/g," "))," Mix"):"Top Stories Mix",a=e||"";return r.a.createElement("div",{className:"mix-container main-content"},r.a.createElement(X,null),r.a.createElement("div",{className:"headline"},t),r.a.createElement(B,{mix:this.props.mix}),r.a.createElement(R.a,{to:"/mashes/".concat(a),className:"toggle-button"},"Get mash"))}}]),t}(n.Component),L=Object(o.b)(function(e){return{mix:e.mix}},{fetchMix:function(){return function(e){return e({type:"START_FETCH_MIX"}),fetch(j.NEW_MIX).then(function(e){return e.json()}).then(function(t){return e({type:"FETCH_MIX",payload:t})}).catch(function(e){return console.error("ERROR",e)})}},fetchMixSearch:N})(P),J=a(16),q=a.n(J),G=a(19),U=a(31),Z=function(e){return{type:"wordcloud",options:{words:e,stepRadius:55,stepAngle:10,cache:{data:!0},style:{fontFamily:"Zilla Slab",hoverState:{backgroundColor:"white",borderColor:0,fontColor:"black",textAlpha:1}},colorType:"palette",palette:["#2196F3","#3F51B5","#42A5F5","#5C6BC0","#64B5F6","#7986CB","#90CAF9","#9FA8DA","#BBDEFB","#C5CAE9"]}}},$=function(e){function t(){return Object(f.a)(this,t),Object(S.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.words;return e&&e.length?r.a.createElement("div",null,r.a.createElement(U.core,{id:"mash-canvas",height:"400",width:"100%",data:Z(e)})):r.a.createElement("div",null)}}]),t}(n.Component),z=a(15),K=Object(z.a)();function Q(e){var t,a=e.id,n=e.mash,s=e.saving,c=e.saved,o=e.saveMash,i=e.setSaved,l=function(){var t=Object(G.a)(q.a.mark(function t(){return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o(n);case 2:K.push("/mashes/saved/".concat(e.recentMashes[0].id)),i();case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}();return t=s?r.a.createElement("div",{className:"star saving-label"},"\u2605 Saving"):a||c?r.a.createElement("div",{className:"star saved-label"},"\u2605 Saved"):r.a.createElement("div",{className:"star save-button",onClick:l},"\u2605 Save"),r.a.createElement(r.a.Fragment,null,t)}var Y=function(e){function t(){return Object(f.a)(this,t),Object(S.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.renderMash()}},{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&this.renderMash()}},{key:"renderMash",value:function(){var e=this.props.match.params,t=e.topic,a=e.id,n=this.props,r=n.getTopMash,s=n.getMashWords;t?s(t):a?this.getMashById(a):r()}},{key:"getMashById",value:function(){var e=Object(G.a)(q.a.mark(function e(t){var a,n,r,s,c;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getRecentMashes();case 2:a=this.props,n=a.recentMashes,r=a.setRecentMash,s=a.getOlderSavedMash,(c=n.find(function(e){return e.id===parseInt(t)}))?r(c):s(t);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a=this.props.mash,n=a.topic,s=a.words,c=a.loading,o=a.saving,i=a.saved,l=a.error,u=this.props.match.params.id,h=this.props,m=h.mash,p=h.recentMashes,d=h.saveMash,E=h.setSaved,v=n?"".concat(O.a.startCase(O.a.replace(n,/-/g," "))," Mash"):"Just a moment...";return e=c?r.a.createElement(W,null):l?r.a.createElement("div",{className:"loading-message"},"Something is amiss. Please try again."):r.a.createElement($,{words:s}),t=this.props.match.params.topic?this.props.match.params.topic:"top stories"===n?"":i?O.a.kebabCase(n):"",r.a.createElement("div",{className:"mash-container main-content"},r.a.createElement(X,null),r.a.createElement("div",{className:"headline"},v),r.a.createElement(Q,{id:u,mash:m,saving:o,saved:i,saveMash:d,setSaved:E,recentMashes:p}),r.a.createElement(R.a,{to:"/mixes/".concat(t),className:"toggle-button"},"Get mix"),e,r.a.createElement("div",{id:"mash-canvas"}))}}]),t}(n.Component),ee=Object(o.b)(function(e){return{mash:e.mash,recentMashes:e.mash.recentMashes}},{getMashWords:C,getTopMash:function(){return function(e){return e({type:"SET_TOPIC",payload:"Top stories"}),e({type:"START_FETCH_MASH"}),fetch(j.NEW_MASH).then(function(e){return e.json()}).then(function(t){e({type:"FETCH_MASH",payload:t})}).catch(function(t){console.error(t),e({type:"SET_ERROR"})})}},getRecentMashes:A,saveMash:function(e){var t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)};return function(e){return e({type:"START_SAVE_MASH"}),fetch(j.MASHES,t).then(function(e){return e.ok?e:new Error(e)}).then(function(e){return e.json()}).then(function(t){return e({type:"COMPLETE_SAVE"}),fetch("/api/v1/mashes/recent").then(function(e){return e.json()}).then(function(t){e({type:"FETCH_RECENT_MASH_LIST",payload:t})}).catch(function(e){return console.error(e)})})}},getOlderSavedMash:function(e){return function(t){return t({type:"START_FETCH_SAVED_MASH"}),fetch(j.MASHES+e).then(function(e){return e.json()}).then(function(e){t({type:"FETCH_MASH",payload:e})}).catch(function(e){return console.error(e)})}},setRecentMash:function(e){return function(t){t({type:"SET_TOPIC",payload:e.topic}),t({type:"START_SET_RECENT_MASH",payload:e.topic}),t({type:"SET_RECENT_MASH",payload:e.words})}},setSaved:function(){return function(e){e({type:"SET_SAVED"})}}})(Y);function te(){return r.a.createElement("div",{className:"center-hv"},r.a.createElement("h2",null,"Oops, page not found"),r.a.createElement("h5",null,r.a.createElement(R.a,{to:"/"},"Try mashing up top headlines")))}var ae=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(S.a)(this,Object(y.a)(t).call(this,e))).state={hasError:!1},a}return Object(M.a)(t,e),Object(b.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h2",{className:"center-hv"},"Something's gone wrong"):this.props.children}}]),t}(r.a.Component),ne=function(){return r.a.createElement(d.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{path:"/",component:w}),r.a.createElement(ae,null,r.a.createElement(v.a,null,r.a.createElement(E.a,{exact:!0,path:"/",component:ee}),r.a.createElement(E.a,{exact:!0,path:"/mixes",component:L}),r.a.createElement(E.a,{exact:!0,path:"/mixes/:topic",component:L}),r.a.createElement(E.a,{exact:!0,path:"/mashes/saved/:id",component:ee}),")} />",r.a.createElement(E.a,{exact:!0,path:"/mashes/:topic",component:ee}),r.a.createElement(E.a,{exact:!0,path:"/mashes",component:ee}),r.a.createElement(E.a,{component:te})))))},re=Object(i.e)(p,Object(i.d)(Object(i.a)(l.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));c.a.render(r.a.createElement(o.a,{store:re},r.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[34,2,1]]]);
//# sourceMappingURL=main.4866b372.chunk.js.map